"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4728],{4728:(w,h,c)=>{c.r(h),c.d(h,{ActivitiesPageComponent:()=>O});var g=c(467),A=c(4412),v=c(6697),d=c(980),T=c(5558),e=c(1360),_=c(5666);let b=(()=>{var i;class a{constructor(t){this.dataService=t,this.loading$=new A.t(!1),this.activities$=new A.t([])}loadActivities(){this.loading$.next(!0),this.dataService.getActivities().pipe((0,v.s)(1),(0,d.j)(()=>this.loading$.next(!1))).subscribe(t=>{this.activities$.next(t)})}getActivityImmediately(t){return this.activities$.value.find(n=>n.id===t)}updateActivity(t){this.loading$.next(!0),this.dataService.updateActivity(t).pipe((0,v.s)(1),(0,d.j)(()=>{this.loading$.next(!1)})).subscribe(()=>{this.loadActivities()})}addActivity(t){this.loading$.next(!0),this.dataService.addActivity(t).pipe((0,v.s)(1),(0,d.j)(()=>{this.loading$.next(!1)})).subscribe(()=>{this.activities$.next([...this.activities$.value,t])})}toggleFavorite(t){this.loading$.next(!0),this.dataService.updateActivity({...t,isFavorite:!t.isFavorite}).pipe((0,v.s)(1),(0,d.j)(()=>{this.loading$.next(!1)})).subscribe(()=>{this.loadActivities()})}deleteActivity(t){this.loading$.next(!0),this.dataService.deleteActivity(t).pipe((0,T.n)(()=>this.dataService.deleteActionsByActivityId(t)),(0,d.j)(()=>this.loading$.next(!1))).subscribe(()=>{const n=this.activities$.value;n.splice(this.activities$.value.findIndex(s=>s.id===t),1),this.activities$.next(n)})}}return(i=a).\u0275fac=function(t){return new(t||i)(e.KVO(_.u))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac}),a})();var p=c(2881),r=c(3092),f=c(7408),y=c(7898),m=c(9178),l=c(9417),k=c(6368);function I(i,a){if(1&i){const o=e.RV6();e.j41(0,"button",2),e.bIt("click",function(){const n=e.eBV(o).$implicit,s=e.XpG();return e.Njj(s.selectIcon(n))}),e.nrm(1,"ion-icon",3),e.k0s()}if(2&i){const o=a.$implicit,t=e.XpG();e.AVh("selected",o===t.value),e.Y8G("disabled",t.disabled),e.R7$(),e.Y8G("name",o)}}let E=(()=>{var i;class a{constructor(){this.iconList=["analytics-outline","body-outline","pizza-outline","bulb-outline","walk-outline","eye-outline","extension-puzzle-outline","hammer-outline","star-outline","language-outline","sparkles-outline","trophy-outline","moon-outline","heart-outline","desktop-outline","prism-outline","apps-outline","bag-add-outline","barbell-outline","boat-outline","cart-outline","fish-outline","hourglass-outline","musical-notes-outline","water-outline"],this.value="",this.disabled=!1,this.onChange=t=>{},this.onTouched=()=>{}}selectIcon(t){this.disabled||(this.value=t,this.onChange(t),this.onTouched())}writeValue(t){this.value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return(i=a).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-icon-picker"]],features:[e.Jv_([{provide:l.kq,useExisting:(0,e.Rfq)(()=>i),multi:!0}])],decls:3,vars:0,consts:[[1,"icon-grid"],["type","button",3,"disabled","selected"],["type","button",3,"click","disabled"],[3,"name"]],template:function(t,n){1&t&&(e.j41(0,"div",0),e.Z7z(1,I,2,4,"button",1,e.fX1),e.k0s()),2&t&&(e.R7$(),e.Dyx(n.iconList))},dependencies:[m.iq],styles:["[_nghost-%COMP%]{display:block;padding:5px}.icon-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.icon-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:1px solid #ccc;border-radius:8px;padding:8px;font-size:24px}.icon-grid[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%]{border-color:var(--ion-color-primary);background-color:var(--ion-color-light)}"]}),a})();function M(i,a){if(1&i){const o=e.RV6();e.j41(0,"button",2),e.bIt("click",function(){const n=e.eBV(o).$implicit,s=e.XpG();return e.Njj(s.selectColor(n))}),e.k0s()}if(2&i){const o=a.$implicit,t=e.XpG();e.xc7("background-color",o),e.AVh("selected",o===t.value),e.Y8G("disabled",t.disabled)}}let $=(()=>{var i;class a{constructor(){this.colorsList=["#FFB74D","#4DB6AC","#BA68C8","#FFD54F","#7986CB","#81C784","#E57373","#64B5F6","#A1887F","#90A4AE","#F06292","#AED581","#4FC3F7","#9575CD","#FF8A65","#DCE775","#F48FB1","#CE93D8","#FFF176","#B0BEC5","#A5D6A7","#E0E0E0","#FFCC80","#B39DDB","#80DEEA"],this.value="",this.disabled=!1,this.onChange=t=>{},this.onTouched=()=>{}}selectColor(t){this.disabled||(this.value=t,this.onChange(t),this.onTouched())}writeValue(t){this.value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return(i=a).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["color-picker"]],features:[e.Jv_([{provide:l.kq,useExisting:(0,e.Rfq)(()=>i),multi:!0}])],decls:3,vars:0,consts:[[1,"icon-grid"],["type","button",3,"background-color","disabled","selected"],["type","button",3,"click","disabled"]],template:function(t,n){1&t&&(e.j41(0,"div",0),e.Z7z(1,M,1,5,"button",1,e.fX1),e.k0s()),2&t&&(e.R7$(),e.Dyx(n.colorsList))},styles:["button[_ngcontent-%COMP%]{width:30px;height:30px;margin:5px;border:3px solid gray}button.selected[_ngcontent-%COMP%]{border:3px solid rgb(77,141,255)}"]}),a})();var F=c(8880);function R(i,a){1&i&&(e.qex(0),e.j41(1,"ion-item"),e.nrm(2,"ion-input",11),e.nI1(3,"translate"),e.nI1(4,"translate"),e.k0s(),e.bVm()),2&i&&(e.R7$(2),e.Y8G("label",e.bMT(3,1,"MANAGE_ACTIVITY.RECOMMENDED_TIME")+" ("+e.bMT(4,3,"SHARED.M")+")"))}function x(i,a){1&i&&(e.qex(0),e.j41(1,"ion-item"),e.nrm(2,"ion-input",12),e.nI1(3,"translate"),e.k0s(),e.bVm()),2&i&&(e.R7$(2),e.FS9("label",e.bMT(3,1,"MANAGE_ACTIVITY.RECOMMENDED_AMOUNT")))}function D(i,a){1&i&&(e.j41(0,"ion-label",14),e.EFF(1,"Time based or Count based should be selected!"),e.k0s()),2&i&&e.Y8G("color","warn")}function P(i,a){1&i&&(e.j41(0,"ion-label",14),e.EFF(1,"recommended time is required!"),e.k0s()),2&i&&e.Y8G("color","warn")}function B(i,a){1&i&&(e.j41(0,"ion-label",14),e.EFF(1,"recommended amount is required!"),e.k0s()),2&i&&e.Y8G("color","warn")}function j(i,a){if(1&i&&(e.j41(0,"ion-item"),e.DNE(1,D,2,1,"ion-label",13)(2,P,2,1,"ion-label",13)(3,B,2,1,"ion-label",13),e.k0s()),2&i){const o=e.XpG();e.R7$(),e.Y8G("ngIf",o.form.getError("baseNotSelected")),e.R7$(),e.Y8G("ngIf",o.form.getError("recommendedTimeRequired")),e.R7$(),e.Y8G("ngIf",o.form.getError("recommendedAmountRequired"))}}let C=(()=>{var i;class a{constructor(t,n){this.modalCtrl=t,this.platform=n,this.existingActivity=void 0,this.form=new l.gE({id:new l.MJ((0,k.A)(),{nonNullable:!0}),color:new l.MJ("",{nonNullable:!0}),isFavorite:new l.MJ(!1,{nonNullable:!0}),name:new l.MJ("",[l.k0.required]),isTimeBased:new l.MJ(!1),isCountBased:new l.MJ(!1),description:new l.MJ(""),icon:new l.MJ("",{nonNullable:!0}),recommendedTime:new l.MJ(null,{nonNullable:!1}),recommendedAmount:new l.MJ(null,{nonNullable:!1})},[s=>s.value.isTimeBased&&!s.value.recommendedTime?{recommendedTimeRequired:!0}:s.value.isCountBased&&!s.value.recommendedAmount?{recommendedAmountRequired:!0}:s.value.isTimeBased||s.value.isCountBased?null:{baseNotSelected:!0}]),this.platform.backButton.subscribeWithPriority(10,()=>{this.goBack()})}ngOnInit(){this.existingActivity&&(this.form.patchValue(this.existingActivity),this.existingActivity.recommendedTime&&this.form.controls.isTimeBased.setValue(!0),this.existingActivity.recommendedAmount&&this.form.controls.isCountBased.setValue(!0),console.log(this.form))}onAddActivity(){const t={...this.form.value};return delete t.isTimeBased,delete t.isCountBased,this.modalCtrl.dismiss(t,"confirm")}goBack(){return this.modalCtrl.dismiss(null,"cancel")}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(r.W3),e.rXU(F.OD))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-manage-activity"]],decls:33,vars:25,consts:[[1,"content"],[3,"formGroup"],["formControlName","name","required","",3,"label"],["formControlName","isTimeBased"],["formControlName","isCountBased"],[4,"ngIf"],["formControlName","icon"],["formControlName","color"],["slot","end"],[3,"click","color","disabled"],[3,"click","color"],["labelPlacement","floating","formControlName","recommendedTime","type","number","min","1","max","10000","value","1",3,"label"],["labelPlacement","floating","formControlName","recommendedAmount","type","number","min","1","max","1000","value","1",3,"label"],[3,"color",4,"ngIf"],[3,"color"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()(),e.j41(5,"ion-content",0)(6,"form",1)(7,"ion-item"),e.nrm(8,"ion-input",2),e.nI1(9,"translate"),e.k0s(),e.j41(10,"ion-item")(11,"ion-toggle",3),e.EFF(12),e.nI1(13,"translate"),e.k0s()(),e.j41(14,"ion-item")(15,"ion-toggle",4),e.EFF(16),e.nI1(17,"translate"),e.k0s()(),e.DNE(18,R,5,5,"ng-container",5)(19,x,4,3,"ng-container",5),e.j41(20,"ion-item"),e.nrm(21,"app-icon-picker",6),e.k0s(),e.j41(22,"ion-item"),e.nrm(23,"color-picker",7),e.k0s(),e.DNE(24,j,4,3,"ion-item",5),e.j41(25,"ion-item")(26,"ion-buttons",8)(27,"ion-button",9),e.bIt("click",function(){return n.onAddActivity()}),e.EFF(28),e.nI1(29,"translate"),e.k0s(),e.j41(30,"ion-button",10),e.bIt("click",function(){return n.goBack()}),e.EFF(31),e.nI1(32,"translate"),e.k0s()()()()()),2&t&&(e.R7$(3),e.JRh(e.bMT(4,13,"MANAGE_ACTIVITY.TITLE")),e.R7$(3),e.Y8G("formGroup",n.form),e.R7$(2),e.Y8G("label",e.bMT(9,15,"MANAGE_ACTIVITY.NAME")),e.R7$(4),e.JRh(e.bMT(13,17,"MANAGE_ACTIVITY.TIME_BASED")),e.R7$(4),e.JRh(e.bMT(17,19,"MANAGE_ACTIVITY.COUNT_BASED")),e.R7$(2),e.Y8G("ngIf",n.form.controls.isTimeBased.value),e.R7$(),e.Y8G("ngIf",n.form.controls.isCountBased.value),e.R7$(5),e.Y8G("ngIf",n.form.invalid),e.R7$(3),e.Y8G("color","success")("disabled",n.form.invalid),e.R7$(),e.JRh(e.bMT(29,21,"SHARED.SAVE")),e.R7$(2),e.Y8G("color","warn"),e.R7$(),e.JRh(e.bMT(32,23,"SHARED.CANCEL")))},dependencies:[f.D9,m.eU,m.ai,m.BC,m.Jm,m.QW,m.W9,m.$w,m.uz,p.bT,l.X1,l.qT,l.BC,l.cb,l.YS,l.j4,l.JD,E,$,m.he,m.BY],styles:["[_nghost-%COMP%]{padding-bottom:40px}.content[_ngcontent-%COMP%]{overflow:auto}"],changeDetection:0}),a})();var G=c(2293),N=c(9347);const S=(i,a)=>a.id;function V(i,a){1&i&&(e.nrm(0,"ion-loading",5),e.nI1(1,"translate")),2&i&&e.Y8G("message",e.bMT(1,1,"SHARED.LOADING"))}function Y(i,a){if(1&i){const o=e.RV6();e.j41(0,"ion-item"),e.nrm(1,"ion-icon",6),e.j41(2,"ion-label",7)(3,"div",8),e.bIt("click",function(){const n=e.eBV(o).$implicit,s=e.XpG();return e.Njj(s.openEditActivityModal(n.id))}),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"div")(7,"ion-button",9),e.bIt("click",function(){const n=e.eBV(o).$implicit,s=e.XpG();return e.Njj(s.toggleFavorite(n))}),e.nrm(8,"ion-icon",10),e.k0s(),e.j41(9,"ion-button",9),e.bIt("click",function(){const n=e.eBV(o).$implicit,s=e.XpG();return e.Njj(s.deleteActivity(n.id))}),e.nrm(10,"ion-icon",11),e.k0s()()()}if(2&i){const o=a.$implicit,t=e.XpG();e.R7$(),e.Y8G("name",o.icon),e.R7$(3),e.SpI(" ",e.bMT(5,3,o.name)+" ("+t.getRecommendedValue(o)+")"," "),e.R7$(4),e.Y8G("name",o.isFavorite?"star":"star-outline")}}let O=(()=>{var i;class a{constructor(t,n,s,u){this.service=t,this.modalCtrl=n,this.translatePipe=s,this.activitiesService=u,this.activities$=this.service.activities$,this.loading$=this.service.loading$}ngOnInit(){this.service.loadActivities()}openAddActivityModal(){var t=this;return(0,g.A)(function*(){const n=yield t.modalCtrl.create({component:C,showBackdrop:!0,backdropDismiss:!1});yield n.present();const{data:s,role:u}=yield n.onWillDismiss();"confirm"===u&&t.service.addActivity(s)})()}deleteActivity(t){var n=this;return(0,g.A)(function*(){const{value:s}=yield y.l.confirm({title:n.translatePipe.transform("SHARED.CONFIRM"),message:`${n.translatePipe.transform("SHARED.DELETE_RECORD")}.\n       ${n.translatePipe.transform("ACTIVITIES.DELETE_WARNING")}`});s&&n.service.deleteActivity(t)})()}getRecommendedValue(t){let n="";return t.recommendedTime&&(n+=`${(0,G.B)(t.recommendedTime,this.translatePipe)}`),t.recommendedTime&&t.recommendedAmount&&(n+="; "),t.recommendedAmount&&(n+=`${t.recommendedAmount} ${this.translatePipe.transform("SHARED.PER_DAY")}`),n}openEditActivityModal(t){var n=this;return(0,g.A)(function*(){const s=yield n.modalCtrl.create({component:C,componentProps:{existingActivity:n.service.getActivityImmediately(t)},showBackdrop:!0,backdropDismiss:!1});yield s.present();const{data:u,role:J}=yield s.onWillDismiss();"confirm"===J&&n.service.updateActivity(u)})()}toggleFavorite(t){this.service.toggleFavorite(t)}ngOnDestroy(){this.activitiesService.loadActivities().subscribe()}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(b),e.rXU(r.W3),e.rXU(f.D9),e.rXU(N.B))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-activities"]],features:[e.Jv_([b,f.D9])],decls:17,vars:13,consts:[["slot","start","default-href","#"],[3,"message",4,"ngIf"],["expand","block",3,"click"],[3,"name"],[1,"activities-list",3,"inset"],[3,"message"],["slot","start",3,"name"],[1,"activity-name-container"],[1,"activity-name","pointer",3,"click"],["fill","outline",3,"click"],["slot","icon-only","size","small",3,"name"],["slot","icon-only","size","small","name","trash"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar"),e.nrm(2,"ion-back-button",0),e.j41(3,"ion-title"),e.EFF(4),e.nI1(5,"translate"),e.k0s()()(),e.j41(6,"ion-content"),e.DNE(7,V,2,3,"ion-loading",1),e.nI1(8,"async"),e.j41(9,"ion-button",2),e.bIt("click",function(){return n.openAddActivityModal()}),e.nrm(10,"ion-icon",3),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"ion-list",4),e.Z7z(14,Y,11,5,"ion-item",null,S),e.nI1(16,"async"),e.k0s()()),2&t&&(e.R7$(4),e.JRh(e.bMT(5,5,"ACTIVITIES.TITLE")),e.R7$(3),e.Y8G("ngIf",e.bMT(8,7,n.loading$)),e.R7$(3),e.Y8G("name","add-outline"),e.R7$(),e.SpI(" ",e.bMT(12,9,"HOME.ADD")," "),e.R7$(2),e.Y8G("inset",!0),e.R7$(),e.Dyx(e.bMT(16,11,n.activities$)))},dependencies:[p.Jj,r.bv,r.Jm,r.W9,r.eU,r.iq,r.uz,r.he,r.nf,r.rQ,r.BC,r.ai,r.el,f.D9,p.MD,p.bT],styles:[".activities-list[_ngcontent-%COMP%]{overflow:auto}"],changeDetection:0}),a})()}}]);